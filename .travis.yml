language: php

php:
  - 7.0
  - 7.1
  - 7.2

matrix:
  allow_failures:
    - php: 7.0 # Laravel >= 5.6 doesn't support PHP 7.0

sudo: false

env:
  - LARAVEL_VERSION="~5.5.0" TESTBENCH_VERSION="~3.5.0"
  - LARAVEL_VERSION="~5.6.0" TESTBENCH_VERSION="~3.6.0"
  - LARAVEL_VERSION="~5.7.0" TESTBENCH_VERSION="~3.7.0"

before_install:
  - sed -i s/~5.5.0\|\|~5.6.0\|\|~5.7.0/${LARAVEL_VERSION}/ composer.json
  - sed -i s/~3.5.0\|\|~3.6.0\|\|~3.7.0/${TESTBENCH_VERSION}/ composer.json
  - composer update # Use update since we'll be changing the composer.json

script: vendor/bin/phpunit tests
